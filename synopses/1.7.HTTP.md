# Протокол HTTP

## HTTP
**HTTP** специально предназначен для передачи гипертекстовых документов.

### Назначение HTTP
Существует множество задач, которые не решены в протоколе TCP и должны быть решены выше по стеку.

* Передача документов  
  Данные в TCP представляют из себя поток байт, HTTP задают внутренную структуру передаваемый данных (документы).
* Передача мета-информации  
  HTTP позволяет передавать мета-информацию о документе, например, MIME-тип, длину документа (для удобного вычитывания из сокета).
* Авторизация пользователя
* Поддержка сессий  
  Протокол HTTP работает по принципу "запрос-ответ", и не предпологает постоянное соединение (каждый новый документ может обрабатываться разными серверами).  
  Поэтому HTTP позволяет хранить данные о пользователях (сессии) между подключениями
* Кеширование документов  
  Используется для уменьшения нагрузки на сервера.
* Согласование содержимого (negotiation)  
  Позволяет клиенту и серверу согласовать опции: использование GZip или передавать документы только на французком языке
* Управление соединением
  HTTP позволяет гибко управлять соединением (закрыть после запроса или оставить открытым для последующих запросов)
  
### HTTP-запрос
![httprequest](https://github.com/ilmen/tp-stepic/blob/master/lesson-6/pictures/netflow.png "Схема HTTP запроса")

### Ключевые особенности HTTP
* Работает поверх TCP/TLS
* Протокол запрос-ответ
* По-умолчанию не используется HTTP **stateless**  
  Изначально HTTP расчитывался как stateless протокол, где соединение после запроса закрывается и сервер не хранит никаких записей про клиента (*ответ сервера формируется только исходя из данных запроса*).  
  HTTP позволяет передавать информацию о клиенте с помощью заголовков.  
  При этом **нет гарантии**, что один клиент будет всегда работать только с одним сервером.  
  **В таких условиях может существовать только stateless архитектура.**  
  (Но HTTP поддерживает механизм сессий, что делает его statefull протоколом, но т.к. использование сессий опционально и сессии не явлюятся критической опцией HTTP, можно пренебречь ими и считать HTTP stateless протоколом) 
* **Текстовый** протокол
* Расширяемый протокол  
  Следствие применения текстового протокола.  
  В протоколе HTTP различные опции передачи задаются заголовками.  
  Есть **стандартный набор заголовков**, поддерживаемых большинством браузеров.  
  Но **можно расширить протокол HTTP, используя свои собственные заголовки**.

## HTTP-запросы
### HTTP/1.0 запрос
GET http://www.ru/robots.txt HTTP/1.0  
Accept: text/html, text/plain  
User-Agent: telnet/hands  
If-Modified-Since: Fri, 24 Jul 2015 22:53:05 GMT

Перевод строки - **\r\n**
