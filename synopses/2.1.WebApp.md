# Web-приложения

Frontend берет на себя обработку HTTP запроса.  
При передаче запроса в backend сервер получает вместе с запросом подготовленное frontend окружение (WSGI окружение).  
Backend серверу остается лишь выполнить свои задачи.

## Основные задачи backend
* Маршрутизация URL (выбор подходящей функции)
* Парсинг заголовков и параметров запроса
* Хранение состояния (сессии) пользователя (распределенное между backend серверами)
* Выполнение бизнес-логики
* Работа с базами данных, хранилищами и сторонними сервисами
* Генерация HTML страницы или JSON ответа

## MVC
**MVC** (Model, View, Controller) - архитектурный паттерн.

MVC - середний пласт webframework'ов, между простыми (например, для упрощенного парсинга заголовков) и монструозными (где необходимо лишь подставить функции в готовый шаблон, например, .NET WebService)

### Схема работы MVC
![mvc_pattern](https://github.com/ilmen/tp-stepic/blob/master/lesson-9/pictures/mvc_detail.png "MVC как архитектурный паттерн в WSGI приложениях")

### Роли компонентов MVC приложения
* **Framework** (Middle Layer) - "обертка" над нашим MVC приложением, которая на каждый запрос вызывает с помошью **Router** подходящий под URL **Controller** и возращает его ответ серверу в виде документа
* **Router** - отображение URL'ов на контроллеры приложения
* **Controller** (точка входа в приложение) - работа с HTTP, связыет **Controller**, **Model** и **View**  
  * Транслирует запрос во входные параметры вызываемых методов модели
  * Вызывает методы **Model**
  * Получает от **Model** данные для отображения документа и передает их во **View**
  * Получает от **View** документ и отдает его в **Framework** в качестве ответа сервера
* **Model** - *полностью* реализует *всю* бизнес-логику приложения, возвращает данных для всех **View**  
  Бизнес-логика: все вычисления, запросы к БД, запросы к сторонним сервисам, использование классов-helper'ов
* **View** - функция для представления данных в необходимом формате (HTML, JSON, XML и т.п.)   
  P.S. Иногда **View** может вызовать методы **Model** и/или **Controller**. *Это спорная практика.*

### Популярные MVC-фраймворки
* Django (Python)
* Ruby-On-Rails (Ruby)
* YiiFramework (PHP)
* ASP.NET MVC

### Плюсы MVC-фреймворков
➕ Готовая архитектура (меньше шансов "выстрелить себе в ногу")  
➕ Повторное использование кода  
➕ Экономия ресурсов  
➕ Участие в Open Source  
➕ Проще найти программистов  
➕ Проще обучать новых в проекте программистов  

## Django
### Соглашение о именовании
****В Django перепутаны определения компонентов MVC!****
MVC -> Django  
Model -> Model  
Router -> urls.py  
Controller -> views  
View -> templates  
